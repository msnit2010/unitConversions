{"ast":null,"code":"var _jsxFileName = \"/home/sifann/workspace/src/components/converter/ConverterForm.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, lazy, Suspense } from 'react';\nimport { categories } from '../../data/categories';\nimport { Box, IconButton, Typography, useTheme, useMediaQuery, Tooltip, Alert, Collapse, Grid, CircularProgress } from '@mui/material';\nimport { useLanguage } from '../../contexts/LanguageContext';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport SwapVertIcon from '@mui/icons-material/SwapVert';\nimport Button from '../common/Button';\nimport TextField from '../common/TextField';\nimport Select from '../common/Select';\nimport Paper from '../common/Paper';\n\n// Lazy load non-critical components\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ConversionDetails = /*#__PURE__*/lazy(_c = () => import('./ConversionDetails'));\n_c2 = ConversionDetails;\nconst CommonConversions = /*#__PURE__*/lazy(_c3 = () => import('./CommonConversions'));\n\n// Loading fallback component\n_c4 = CommonConversions;\nconst LoadingFallback = () => /*#__PURE__*/_jsxDEV(Box, {\n  sx: {\n    display: 'flex',\n    justifyContent: 'center',\n    p: 3\n  },\n  children: /*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 30,\n    columnNumber: 5\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 29,\n  columnNumber: 3\n}, this);\n\n// Debounce function for performance\n_c5 = LoadingFallback;\nconst debounce = (func, wait) => {\n  let timeout;\n  return function executedFunction(...args) {\n    const later = () => {\n      clearTimeout(timeout);\n      func(...args);\n    };\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n  };\n};\n\n// Update API base URL configuration\nconst API_BASE_URL = process.env.NODE_ENV === 'production' ? `${window.location.origin}/api` // Use window.location.origin in production\n: 'http://localhost:5001/api'; // Use localhost in development\n\nconsole.log('API Base URL:', API_BASE_URL); // Add logging for debugging\n\nconst ConverterForm = ({\n  category,\n  onFormulaUpdate\n}) => {\n  _s();\n  const {\n    t\n  } = useLanguage();\n  const theme = useTheme();\n  const navigate = useNavigate();\n  const location = useLocation();\n  const isMobile = useMediaQuery(theme.breakpoints.down('sm'));\n  const [fromValue, setFromValue] = useState('');\n  const [toValue, setToValue] = useState('');\n  const [fromUnit, setFromUnit] = useState('');\n  const [toUnit, setToUnit] = useState('');\n  const [error, setError] = useState('');\n  const [conversionResult, setConversionResult] = useState(null);\n  const [loading, setLoading] = useState(false);\n\n  // Find category data case-insensitively\n  const categoryData = categories.find(cat => cat.id.toLowerCase() === (category === null || category === void 0 ? void 0 : category.toLowerCase()));\n  const availableUnits = (categoryData === null || categoryData === void 0 ? void 0 : categoryData.commonUnits) || [];\n\n  // Debounced conversion handler\n  const debouncedConvert = React.useCallback(debounce(() => {\n    if (fromValue && fromUnit && toUnit && validateNumber(fromValue)) {\n      handleConvert();\n    }\n  }, 300), [fromValue, fromUnit, toUnit]);\n  useEffect(() => {\n    debouncedConvert();\n    return () => {\n      var _debouncedConvert$can;\n      return (_debouncedConvert$can = debouncedConvert.cancel) === null || _debouncedConvert$can === void 0 ? void 0 : _debouncedConvert$can.call(debouncedConvert);\n    };\n  }, [fromValue, fromUnit, toUnit]);\n\n  // Cache unit options\n  const unitOptions = React.useMemo(() => availableUnits.map(unit => ({\n    value: unit,\n    label: t(`units.${unit.toLowerCase()}`)\n  })), [availableUnits, t]);\n  useEffect(() => {\n    var _location$state, _location$state2;\n    // Handle navigation state for common conversions\n    if ((_location$state = location.state) !== null && _location$state !== void 0 && _location$state.fromUnit && (_location$state2 = location.state) !== null && _location$state2 !== void 0 && _location$state2.toUnit) {\n      setFromUnit(location.state.fromUnit);\n      setToUnit(location.state.toUnit);\n      // Clear the navigation state\n      navigate(location.pathname, {\n        replace: true\n      });\n    }\n    // If no state, set default units\n    else if (availableUnits.length > 0 && !fromUnit && !toUnit) {\n      setFromUnit(availableUnits[0]);\n      setToUnit(availableUnits[1]);\n    }\n  }, [availableUnits, location.state, navigate, location.pathname]);\n  const validateNumber = value => {\n    if (!value || value.trim() === '') return false;\n    const num = parseFloat(value);\n    return !isNaN(num) && isFinite(num);\n  };\n  const handleConvert = async () => {\n    if (!validateNumber(fromValue) || !fromUnit || !toUnit) {\n      setError(t('errors.invalidNumber'));\n      return;\n    }\n    if (!categoryData) {\n      console.error('Category data not found:', category);\n      setError(t('errors.conversionFailed'));\n      return;\n    }\n    setError('');\n    setLoading(true);\n    try {\n      var _data$result;\n      const controller = new AbortController();\n      const timeoutId = setTimeout(() => controller.abort(), 5000); // 5 second timeout\n\n      const url = `${API_BASE_URL}/convert?category=${categoryData.id}&fromUnit=${fromUnit}&toUnit=${toUnit}&value=${fromValue}`;\n      console.log('Making API request to:', url);\n      const response = await fetch(url, {\n        signal: controller.signal,\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n        credentials: 'same-origin'\n      });\n      clearTimeout(timeoutId);\n\n      // Log the raw response for debugging\n      console.log('Response status:', response.status);\n      console.log('Response headers:', Object.fromEntries(response.headers.entries()));\n      let data;\n      const contentType = response.headers.get('content-type');\n      const responseText = await response.text();\n      console.log('Content-Type:', contentType);\n      console.log('Raw response:', responseText);\n\n      // Only try to parse as JSON if the content-type is application/json\n      if (contentType && contentType.includes('application/json')) {\n        try {\n          data = JSON.parse(responseText);\n        } catch (parseError) {\n          console.error('Failed to parse response as JSON:', parseError);\n          throw new Error(t('errors.invalidResponse'));\n        }\n      } else {\n        console.error('Received non-JSON response:', contentType);\n        throw new Error(t('errors.invalidResponse'));\n      }\n      if (!response.ok) {\n        throw new Error(data.error || t('errors.conversionFailed'));\n      }\n      if (!data || !data.success || typeof ((_data$result = data.result) === null || _data$result === void 0 ? void 0 : _data$result.value) === 'undefined') {\n        console.error('Invalid response data:', data);\n        throw new Error(t('errors.invalidResponse'));\n      }\n      const resultValue = parseFloat(data.result.value);\n      if (isNaN(resultValue)) {\n        throw new Error(t('errors.invalidNumber'));\n      }\n      setToValue(resultValue.toString());\n\n      // Format the conversion result with proper units and validation\n      const formattedResult = {\n        from: {\n          unit: fromUnit,\n          value: parseFloat(fromValue),\n          formatted: `${fromValue} ${t(`units.${fromUnit.toLowerCase()}`)}`\n        },\n        to: {\n          unit: toUnit,\n          value: resultValue,\n          formatted: `${resultValue} ${t(`units.${toUnit.toLowerCase()}`)}`\n        },\n        formula: data.formula || undefined,\n        steps: Array.isArray(data.steps) ? data.steps : undefined\n      };\n      setConversionResult(formattedResult);\n      if (onFormulaUpdate && data.formula) {\n        onFormulaUpdate(data.formula);\n      }\n      setError('');\n    } catch (err) {\n      console.error('Conversion error:', err);\n      if (err.name === 'AbortError') {\n        setError(t('errors.timeout'));\n      } else if (!navigator.onLine) {\n        setError(t('errors.offline'));\n      } else {\n        setError(err.message || t('errors.networkError'));\n      }\n      setToValue('');\n      setConversionResult(null);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleSubmit = e => {\n    e.preventDefault();\n    setError('');\n    if (!validateNumber(fromValue)) {\n      setError(t('errors.invalidNumber'));\n      return;\n    }\n    handleConvert();\n  };\n  const handleSwapUnits = () => {\n    const oldFromValue = fromValue;\n    const oldToValue = toValue;\n    setFromUnit(toUnit);\n    setToUnit(fromUnit);\n    setFromValue(oldToValue);\n    setToValue(oldFromValue);\n  };\n  const handleCommonConversionSelect = conversion => {\n    if (conversion.category !== category) {\n      // If the conversion is from a different category, navigate to that category\n      navigate(`/convert/${conversion.category}`, {\n        state: {\n          fromUnit: conversion.from,\n          toUnit: conversion.to\n        }\n      });\n      return;\n    }\n\n    // If it's the same category, just update the units\n    setFromUnit(conversion.from);\n    setToUnit(conversion.to);\n  };\n  return /*#__PURE__*/_jsxDEV(Box, {\n    component: \"form\",\n    onSubmit: handleSubmit,\n    sx: {\n      width: '100%',\n      maxWidth: 600,\n      mx: 'auto'\n    },\n    role: \"main\",\n    \"aria-label\": t('converter.title'),\n    children: [/*#__PURE__*/_jsxDEV(Paper, {\n      elevation: 0,\n      transparent: isMobile,\n      sx: {\n        p: {\n          xs: 2,\n          sm: 3\n        },\n        borderRadius: 2,\n        backgroundColor: theme.palette.background.paper,\n        border: `1px solid ${theme.palette.divider}`,\n        '@media (max-width: 600px)': {\n          border: 'none',\n          p: 2,\n          backgroundColor: 'transparent'\n        }\n      },\n      children: /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        spacing: 3,\n        alignItems: \"flex-start\",\n        children: [/*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          sm: 6,\n          children: [/*#__PURE__*/_jsxDEV(TextField, {\n            label: t('converter.value'),\n            value: fromValue,\n            onChange: e => {\n              const value = e.target.value;\n              if (value === '' || /^-?\\d*\\.?\\d*$/.test(value)) {\n                setFromValue(value);\n                setError('');\n              }\n            },\n            onKeyDown: e => {\n              if (e.key === 'Enter') {\n                e.preventDefault();\n                handleSubmit(e);\n              }\n            },\n            error: !!error,\n            helperText: error,\n            type: \"text\",\n            inputMode: \"decimal\",\n            placeholder: \"0\",\n            \"aria-label\": t('converter.value'),\n            \"aria-invalid\": !!error,\n            \"aria-describedby\": error ? 'value-error' : undefined,\n            fullWidth: true,\n            autoFocus: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 297,\n            columnNumber: 13\n          }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"value-error\",\n            role: \"alert\",\n            style: {\n              display: 'none'\n            },\n            children: error\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 325,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          sm: 6,\n          children: /*#__PURE__*/_jsxDEV(Select, {\n            label: t('converter.fromUnit'),\n            value: fromUnit,\n            onChange: e => setFromUnit(e.target.value),\n            options: unitOptions,\n            size: \"medium\",\n            fullWidth: true,\n            \"aria-label\": t('converter.fromUnit'),\n            onKeyDown: e => {\n              if (e.key === 'Enter') {\n                e.preventDefault();\n                handleSubmit(e);\n              }\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 331,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          sx: {\n            display: 'flex',\n            justifyContent: 'center',\n            py: {\n              xs: 1,\n              sm: 1.5\n            }\n          },\n          children: /*#__PURE__*/_jsxDEV(Tooltip, {\n            title: t('converter.swap'),\n            arrow: true,\n            children: /*#__PURE__*/_jsxDEV(IconButton, {\n              onClick: handleSwapUnits,\n              \"aria-label\": t('converter.swap'),\n              onKeyDown: e => {\n                if (e.key === 'Enter' || e.key === ' ') {\n                  e.preventDefault();\n                  handleSwapUnits();\n                }\n              },\n              sx: {\n                p: 1.5,\n                width: 44,\n                height: 44,\n                border: `1px solid ${theme.palette.divider}`,\n                borderRadius: '50%',\n                backgroundColor: theme.palette.background.paper,\n                '&:hover': {\n                  backgroundColor: theme.palette.action.hover\n                },\n                '&:active': {\n                  backgroundColor: theme.palette.action.selected,\n                  transform: 'scale(0.95)'\n                },\n                '&:focus-visible': {\n                  outline: `2px solid ${theme.palette.primary.main}`,\n                  outlineOffset: 2\n                }\n              },\n              children: /*#__PURE__*/_jsxDEV(SwapVertIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 386,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 357,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 356,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 347,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          sm: 6,\n          children: /*#__PURE__*/_jsxDEV(Select, {\n            label: t('converter.toUnit'),\n            value: toUnit,\n            onChange: e => setToUnit(e.target.value),\n            options: unitOptions,\n            size: \"medium\",\n            fullWidth: true,\n            \"aria-label\": t('converter.toUnit'),\n            onKeyDown: e => {\n              if (e.key === 'Enter') {\n                e.preventDefault();\n                handleSubmit(e);\n              }\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 391,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 390,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            fullWidth: true,\n            variant: \"contained\",\n            onClick: handleSubmit,\n            disabled: loading || !fromValue || !fromUnit || !toUnit || !validateNumber(fromValue),\n            loading: loading,\n            size: \"large\",\n            type: \"submit\",\n            \"aria-label\": t('converter.convert'),\n            \"aria-busy\": loading,\n            sx: {\n              '&:focus-visible': {\n                outline: `2px solid ${theme.palette.primary.main}`,\n                outlineOffset: 2\n              }\n            },\n            children: t('converter.convert')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 408,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 407,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 295,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Suspense, {\n      fallback: /*#__PURE__*/_jsxDEV(LoadingFallback, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 431,\n        columnNumber: 27\n      }, this),\n      children: [conversionResult && /*#__PURE__*/_jsxDEV(ConversionDetails, {\n        result: conversionResult,\n        sx: {\n          mt: 3,\n          '@media (max-width: 600px)': {\n            mx: 0\n          }\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 433,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(CommonConversions, {\n        onSelect: handleCommonConversionSelect,\n        sx: {\n          mt: 4,\n          '@media (max-width: 600px)': {\n            mx: 0\n          }\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 444,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 431,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 269,\n    columnNumber: 5\n  }, this);\n};\n_s(ConverterForm, \"O4FmCA7YlIsJ8Xn22x1xslRBSCE=\", false, function () {\n  return [useLanguage, useTheme, useNavigate, useLocation, useMediaQuery];\n});\n_c6 = ConverterForm;\nexport default ConverterForm;\nvar _c, _c2, _c3, _c4, _c5, _c6;\n$RefreshReg$(_c, \"ConversionDetails$lazy\");\n$RefreshReg$(_c2, \"ConversionDetails\");\n$RefreshReg$(_c3, \"CommonConversions$lazy\");\n$RefreshReg$(_c4, \"CommonConversions\");\n$RefreshReg$(_c5, \"LoadingFallback\");\n$RefreshReg$(_c6, \"ConverterForm\");","map":{"version":3,"names":["React","useState","useEffect","lazy","Suspense","categories","Box","IconButton","Typography","useTheme","useMediaQuery","Tooltip","Alert","Collapse","Grid","CircularProgress","useLanguage","useNavigate","useLocation","SwapVertIcon","Button","TextField","Select","Paper","jsxDEV","_jsxDEV","ConversionDetails","_c","_c2","CommonConversions","_c3","_c4","LoadingFallback","sx","display","justifyContent","p","children","fileName","_jsxFileName","lineNumber","columnNumber","_c5","debounce","func","wait","timeout","executedFunction","args","later","clearTimeout","setTimeout","API_BASE_URL","process","env","NODE_ENV","window","location","origin","console","log","ConverterForm","category","onFormulaUpdate","_s","t","theme","navigate","isMobile","breakpoints","down","fromValue","setFromValue","toValue","setToValue","fromUnit","setFromUnit","toUnit","setToUnit","error","setError","conversionResult","setConversionResult","loading","setLoading","categoryData","find","cat","id","toLowerCase","availableUnits","commonUnits","debouncedConvert","useCallback","validateNumber","handleConvert","_debouncedConvert$can","cancel","call","unitOptions","useMemo","map","unit","value","label","_location$state","_location$state2","state","pathname","replace","length","trim","num","parseFloat","isNaN","isFinite","_data$result","controller","AbortController","timeoutId","abort","url","response","fetch","signal","headers","credentials","status","Object","fromEntries","entries","data","contentType","get","responseText","text","includes","JSON","parse","parseError","Error","ok","success","result","resultValue","toString","formattedResult","from","formatted","to","formula","undefined","steps","Array","isArray","err","name","navigator","onLine","message","handleSubmit","e","preventDefault","handleSwapUnits","oldFromValue","oldToValue","handleCommonConversionSelect","conversion","component","onSubmit","width","maxWidth","mx","role","elevation","transparent","xs","sm","borderRadius","backgroundColor","palette","background","paper","border","divider","container","spacing","alignItems","item","onChange","target","test","onKeyDown","key","helperText","type","inputMode","placeholder","fullWidth","autoFocus","style","options","size","py","title","arrow","onClick","height","action","hover","selected","transform","outline","primary","main","outlineOffset","variant","disabled","fallback","mt","onSelect","_c6","$RefreshReg$"],"sources":["/home/sifann/workspace/src/components/converter/ConverterForm.js"],"sourcesContent":["import React, { useState, useEffect, lazy, Suspense } from 'react';\r\nimport { categories } from '../../data/categories';\r\nimport {\r\n  Box,\r\n  IconButton,\r\n  Typography,\r\n  useTheme,\r\n  useMediaQuery,\r\n  Tooltip,\r\n  Alert,\r\n  Collapse,\r\n  Grid,\r\n  CircularProgress\r\n} from '@mui/material';\r\nimport { useLanguage } from '../../contexts/LanguageContext';\r\nimport { useNavigate, useLocation } from 'react-router-dom';\r\nimport SwapVertIcon from '@mui/icons-material/SwapVert';\r\nimport Button from '../common/Button';\r\nimport TextField from '../common/TextField';\r\nimport Select from '../common/Select';\r\nimport Paper from '../common/Paper';\r\n\r\n// Lazy load non-critical components\r\nconst ConversionDetails = lazy(() => import('./ConversionDetails'));\r\nconst CommonConversions = lazy(() => import('./CommonConversions'));\r\n\r\n// Loading fallback component\r\nconst LoadingFallback = () => (\r\n  <Box sx={{ display: 'flex', justifyContent: 'center', p: 3 }}>\r\n    <CircularProgress />\r\n  </Box>\r\n);\r\n\r\n// Debounce function for performance\r\nconst debounce = (func, wait) => {\r\n  let timeout;\r\n  return function executedFunction(...args) {\r\n    const later = () => {\r\n      clearTimeout(timeout);\r\n      func(...args);\r\n    };\r\n    clearTimeout(timeout);\r\n    timeout = setTimeout(later, wait);\r\n  };\r\n};\r\n\r\n// Update API base URL configuration\r\nconst API_BASE_URL = process.env.NODE_ENV === 'production'\r\n  ? `${window.location.origin}/api`  // Use window.location.origin in production\r\n  : 'http://localhost:5001/api';  // Use localhost in development\r\n\r\nconsole.log('API Base URL:', API_BASE_URL); // Add logging for debugging\r\n\r\nconst ConverterForm = ({ category, onFormulaUpdate }) => {\r\n  const { t } = useLanguage();\r\n  const theme = useTheme();\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const isMobile = useMediaQuery(theme.breakpoints.down('sm'));\r\n  \r\n  const [fromValue, setFromValue] = useState('');\r\n  const [toValue, setToValue] = useState('');\r\n  const [fromUnit, setFromUnit] = useState('');\r\n  const [toUnit, setToUnit] = useState('');\r\n  const [error, setError] = useState('');\r\n  const [conversionResult, setConversionResult] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  // Find category data case-insensitively\r\n  const categoryData = categories.find(cat => \r\n    cat.id.toLowerCase() === category?.toLowerCase()\r\n  );\r\n  const availableUnits = categoryData?.commonUnits || [];\r\n\r\n  // Debounced conversion handler\r\n  const debouncedConvert = React.useCallback(\r\n    debounce(() => {\r\n      if (fromValue && fromUnit && toUnit && validateNumber(fromValue)) {\r\n        handleConvert();\r\n      }\r\n    }, 300),\r\n    [fromValue, fromUnit, toUnit]\r\n  );\r\n\r\n  useEffect(() => {\r\n    debouncedConvert();\r\n    return () => debouncedConvert.cancel?.();\r\n  }, [fromValue, fromUnit, toUnit]);\r\n\r\n  // Cache unit options\r\n  const unitOptions = React.useMemo(() => \r\n    availableUnits.map(unit => ({\r\n      value: unit,\r\n      label: t(`units.${unit.toLowerCase()}`)\r\n    })),\r\n    [availableUnits, t]\r\n  );\r\n\r\n  useEffect(() => {\r\n    // Handle navigation state for common conversions\r\n    if (location.state?.fromUnit && location.state?.toUnit) {\r\n      setFromUnit(location.state.fromUnit);\r\n      setToUnit(location.state.toUnit);\r\n      // Clear the navigation state\r\n      navigate(location.pathname, { replace: true });\r\n    }\r\n    // If no state, set default units\r\n    else if (availableUnits.length > 0 && !fromUnit && !toUnit) {\r\n      setFromUnit(availableUnits[0]);\r\n      setToUnit(availableUnits[1]);\r\n    }\r\n  }, [availableUnits, location.state, navigate, location.pathname]);\r\n\r\n  const validateNumber = (value) => {\r\n    if (!value || value.trim() === '') return false;\r\n    const num = parseFloat(value);\r\n    return !isNaN(num) && isFinite(num);\r\n  };\r\n\r\n  const handleConvert = async () => {\r\n    if (!validateNumber(fromValue) || !fromUnit || !toUnit) {\r\n      setError(t('errors.invalidNumber'));\r\n      return;\r\n    }\r\n\r\n    if (!categoryData) {\r\n      console.error('Category data not found:', category);\r\n      setError(t('errors.conversionFailed'));\r\n      return;\r\n    }\r\n\r\n    setError('');\r\n    setLoading(true);\r\n\r\n    try {\r\n      const controller = new AbortController();\r\n      const timeoutId = setTimeout(() => controller.abort(), 5000); // 5 second timeout\r\n\r\n      const url = `${API_BASE_URL}/convert?category=${categoryData.id}&fromUnit=${fromUnit}&toUnit=${toUnit}&value=${fromValue}`;\r\n      console.log('Making API request to:', url);\r\n\r\n      const response = await fetch(url, { \r\n        signal: controller.signal,\r\n        headers: {\r\n          'Accept': 'application/json',\r\n          'Content-Type': 'application/json'\r\n        },\r\n        credentials: 'same-origin'\r\n      });\r\n\r\n      clearTimeout(timeoutId);\r\n\r\n      // Log the raw response for debugging\r\n      console.log('Response status:', response.status);\r\n      console.log('Response headers:', Object.fromEntries(response.headers.entries()));\r\n      \r\n      let data;\r\n      const contentType = response.headers.get('content-type');\r\n      const responseText = await response.text();\r\n      \r\n      console.log('Content-Type:', contentType);\r\n      console.log('Raw response:', responseText);\r\n\r\n      // Only try to parse as JSON if the content-type is application/json\r\n      if (contentType && contentType.includes('application/json')) {\r\n        try {\r\n          data = JSON.parse(responseText);\r\n        } catch (parseError) {\r\n          console.error('Failed to parse response as JSON:', parseError);\r\n          throw new Error(t('errors.invalidResponse'));\r\n        }\r\n      } else {\r\n        console.error('Received non-JSON response:', contentType);\r\n        throw new Error(t('errors.invalidResponse'));\r\n      }\r\n      \r\n      if (!response.ok) {\r\n        throw new Error(data.error || t('errors.conversionFailed'));\r\n      }\r\n\r\n      if (!data || !data.success || typeof data.result?.value === 'undefined') {\r\n        console.error('Invalid response data:', data);\r\n        throw new Error(t('errors.invalidResponse'));\r\n      }\r\n\r\n      const resultValue = parseFloat(data.result.value);\r\n      if (isNaN(resultValue)) {\r\n        throw new Error(t('errors.invalidNumber'));\r\n      }\r\n\r\n      setToValue(resultValue.toString());\r\n      \r\n      // Format the conversion result with proper units and validation\r\n      const formattedResult = {\r\n        from: {\r\n          unit: fromUnit,\r\n          value: parseFloat(fromValue),\r\n          formatted: `${fromValue} ${t(`units.${fromUnit.toLowerCase()}`)}`\r\n        },\r\n        to: {\r\n          unit: toUnit,\r\n          value: resultValue,\r\n          formatted: `${resultValue} ${t(`units.${toUnit.toLowerCase()}`)}`\r\n        },\r\n        formula: data.formula || undefined,\r\n        steps: Array.isArray(data.steps) ? data.steps : undefined\r\n      };\r\n      \r\n      setConversionResult(formattedResult);\r\n      if (onFormulaUpdate && data.formula) {\r\n        onFormulaUpdate(data.formula);\r\n      }\r\n      setError('');\r\n    } catch (err) {\r\n      console.error('Conversion error:', err);\r\n      if (err.name === 'AbortError') {\r\n        setError(t('errors.timeout'));\r\n      } else if (!navigator.onLine) {\r\n        setError(t('errors.offline'));\r\n      } else {\r\n        setError(err.message || t('errors.networkError'));\r\n      }\r\n      setToValue('');\r\n      setConversionResult(null);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    setError('');\r\n\r\n    if (!validateNumber(fromValue)) {\r\n      setError(t('errors.invalidNumber'));\r\n      return;\r\n    }\r\n\r\n    handleConvert();\r\n  };\r\n\r\n  const handleSwapUnits = () => {\r\n    const oldFromValue = fromValue;\r\n    const oldToValue = toValue;\r\n    setFromUnit(toUnit);\r\n    setToUnit(fromUnit);\r\n    setFromValue(oldToValue);\r\n    setToValue(oldFromValue);\r\n  };\r\n\r\n  const handleCommonConversionSelect = (conversion) => {\r\n    if (conversion.category !== category) {\r\n      // If the conversion is from a different category, navigate to that category\r\n      navigate(`/convert/${conversion.category}`, { \r\n        state: { \r\n          fromUnit: conversion.from,\r\n          toUnit: conversion.to\r\n        }\r\n      });\r\n      return;\r\n    }\r\n    \r\n    // If it's the same category, just update the units\r\n    setFromUnit(conversion.from);\r\n    setToUnit(conversion.to);\r\n  };\r\n\r\n  return (\r\n    <Box \r\n      component=\"form\" \r\n      onSubmit={handleSubmit} \r\n      sx={{ \r\n        width: '100%',\r\n        maxWidth: 600,\r\n        mx: 'auto'\r\n      }}\r\n      role=\"main\"\r\n      aria-label={t('converter.title')}\r\n    >\r\n      <Paper\r\n        elevation={0}\r\n        transparent={isMobile}\r\n        sx={{\r\n          p: { xs: 2, sm: 3 },\r\n          borderRadius: 2,\r\n          backgroundColor: theme.palette.background.paper,\r\n          border: `1px solid ${theme.palette.divider}`,\r\n          '@media (max-width: 600px)': {\r\n            border: 'none',\r\n            p: 2,\r\n            backgroundColor: 'transparent'\r\n          }\r\n        }}\r\n      >\r\n        <Grid container spacing={3} alignItems=\"flex-start\">\r\n          <Grid item xs={12} sm={6}>\r\n            <TextField\r\n              label={t('converter.value')}\r\n              value={fromValue}\r\n              onChange={(e) => {\r\n                const value = e.target.value;\r\n                if (value === '' || /^-?\\d*\\.?\\d*$/.test(value)) {\r\n                  setFromValue(value);\r\n                  setError('');\r\n                }\r\n              }}\r\n              onKeyDown={(e) => {\r\n                if (e.key === 'Enter') {\r\n                  e.preventDefault();\r\n                  handleSubmit(e);\r\n                }\r\n              }}\r\n              error={!!error}\r\n              helperText={error}\r\n              type=\"text\"\r\n              inputMode=\"decimal\"\r\n              placeholder=\"0\"\r\n              aria-label={t('converter.value')}\r\n              aria-invalid={!!error}\r\n              aria-describedby={error ? 'value-error' : undefined}\r\n              fullWidth\r\n              autoFocus\r\n            />\r\n            {error && (\r\n              <div id=\"value-error\" role=\"alert\" style={{ display: 'none' }}>\r\n                {error}\r\n              </div>\r\n            )}\r\n          </Grid>\r\n          <Grid item xs={12} sm={6}>\r\n            <Select\r\n              label={t('converter.fromUnit')}\r\n              value={fromUnit}\r\n              onChange={(e) => setFromUnit(e.target.value)}\r\n              options={unitOptions}\r\n              size=\"medium\"\r\n              fullWidth\r\n              aria-label={t('converter.fromUnit')}\r\n              onKeyDown={(e) => {\r\n                if (e.key === 'Enter') {\r\n                  e.preventDefault();\r\n                  handleSubmit(e);\r\n                }\r\n              }}\r\n            />\r\n          </Grid>\r\n          <Grid \r\n            item \r\n            xs={12} \r\n            sx={{ \r\n              display: 'flex', \r\n              justifyContent: 'center',\r\n              py: { xs: 1, sm: 1.5 }\r\n            }}\r\n          >\r\n            <Tooltip title={t('converter.swap')} arrow>\r\n              <IconButton\r\n                onClick={handleSwapUnits}\r\n                aria-label={t('converter.swap')}\r\n                onKeyDown={(e) => {\r\n                  if (e.key === 'Enter' || e.key === ' ') {\r\n                    e.preventDefault();\r\n                    handleSwapUnits();\r\n                  }\r\n                }}\r\n                sx={{\r\n                  p: 1.5,\r\n                  width: 44,\r\n                  height: 44,\r\n                  border: `1px solid ${theme.palette.divider}`,\r\n                  borderRadius: '50%',\r\n                  backgroundColor: theme.palette.background.paper,\r\n                  '&:hover': {\r\n                    backgroundColor: theme.palette.action.hover\r\n                  },\r\n                  '&:active': {\r\n                    backgroundColor: theme.palette.action.selected,\r\n                    transform: 'scale(0.95)'\r\n                  },\r\n                  '&:focus-visible': {\r\n                    outline: `2px solid ${theme.palette.primary.main}`,\r\n                    outlineOffset: 2\r\n                  }\r\n                }}\r\n              >\r\n                <SwapVertIcon />\r\n              </IconButton>\r\n            </Tooltip>\r\n          </Grid>\r\n          <Grid item xs={12} sm={6}>\r\n            <Select\r\n              label={t('converter.toUnit')}\r\n              value={toUnit}\r\n              onChange={(e) => setToUnit(e.target.value)}\r\n              options={unitOptions}\r\n              size=\"medium\"\r\n              fullWidth\r\n              aria-label={t('converter.toUnit')}\r\n              onKeyDown={(e) => {\r\n                if (e.key === 'Enter') {\r\n                  e.preventDefault();\r\n                  handleSubmit(e);\r\n                }\r\n              }}\r\n            />\r\n          </Grid>\r\n          <Grid item xs={12}>\r\n            <Button\r\n              fullWidth\r\n              variant=\"contained\"\r\n              onClick={handleSubmit}\r\n              disabled={loading || !fromValue || !fromUnit || !toUnit || !validateNumber(fromValue)}\r\n              loading={loading}\r\n              size=\"large\"\r\n              type=\"submit\"\r\n              aria-label={t('converter.convert')}\r\n              aria-busy={loading}\r\n              sx={{\r\n                '&:focus-visible': {\r\n                  outline: `2px solid ${theme.palette.primary.main}`,\r\n                  outlineOffset: 2\r\n                }\r\n              }}\r\n            >\r\n              {t('converter.convert')}\r\n            </Button>\r\n          </Grid>\r\n        </Grid>\r\n      </Paper>\r\n      \r\n      <Suspense fallback={<LoadingFallback />}>\r\n        {conversionResult && (\r\n          <ConversionDetails \r\n            result={conversionResult} \r\n            sx={{ \r\n              mt: 3,\r\n              '@media (max-width: 600px)': {\r\n                mx: 0\r\n              }\r\n            }} \r\n          />\r\n        )}\r\n        \r\n        <CommonConversions\r\n          onSelect={handleCommonConversionSelect}\r\n          sx={{ \r\n            mt: 4,\r\n            '@media (max-width: 600px)': {\r\n              mx: 0\r\n            }\r\n          }}\r\n        />\r\n      </Suspense>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default ConverterForm; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}